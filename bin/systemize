#!/usr/bin/env python

import os
from os import path
import argparse

config_dir = path.normpath(path.join(path.dirname(__file__), '..'))
script_dirs = ['homedir',
               'ubuntu',
               'vim']

scripts = []
for script_dir in script_dirs:
    for root, _, filenames in os.walk(path.join(config_dir, script_dir)):
        for filename in filenames:
            filename = path.join(root, filename)
            if os.access(filename, os.X_OK):
                scripts.append(filename)
scripts = sorted(scripts, key=lambda filepath: path.basename(filepath))

parser = argparse.ArgumentParser(description='Run each setup scripts in order')
parser.add_argument('--list', '-l',
                    action='store_true', default=False,
                    help='List the setup scripts rather than run')
args = parser.parse_args()

if args.list:
    for script in scripts:
        print script
else:
    for script in scripts:
        os.system(script)
